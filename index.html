<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Beautiful daily quotes for inspiration and motivation">
    <meta name="theme-color" content="#0a0a23">
    <title>Millennium's Wisdom</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="/icon-192x192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Google Fonts for Georgian and Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Noto+Serif+Georgian:wght@400;700&display=swap" rel="stylesheet">

    <!-- Vanilla Tilt for subtle 3D card effect -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.1/vanilla-tilt.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a23;
            --bg-secondary: #15153b;
            --bg-card: rgba(20, 20, 60, 0.95);
            --text-primary: #e5e5f5;
            --text-secondary: #a0a0cc;
            --accent: #4f46e5;
            --accent-hover: #4338ca;
            --accent-secondary: #7c3aed;
            --gradient: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            --shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            --border: rgba(255, 255, 255, 0.1);
            --success: #10b981;
            --warning: #f59e0b;
        }

        body {
            font-family: 'Inter', 'Noto Serif Georgian', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            touch-action: manipulation;
        }

        [lang="ka"], .georgian {
            font-family: 'Noto Serif Georgian', serif;
            font-weight: 400;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(79, 70, 229, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(124, 58, 237, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.08) 0%, transparent 50%);
            z-index: -1;
            animation: pulse 30s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.4; }
        }

        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.5rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 2.5rem;
            animation: fadeIn 0.8s ease-out;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            animation: glow 5s ease-in-out infinite alternate;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px rgba(79, 70, 229, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(79, 70, 229, 0.6)); }
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 300;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .quote-stats {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(79, 70, 229, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            border: 1px solid rgba(79, 70, 229, 0.2);
        }

        .quote-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 700px;
            width: 100%;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
            animation: scaleIn 0.6s ease-out;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .quote-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            transform: translateY(-2px);
        }

        .quote-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px;
            padding: 2px;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.4), rgba(124, 58, 237, 0.4), rgba(16, 185, 129, 0.2));
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0.6;
            z-index: -1;
            animation: softGlow 6s ease-in-out infinite alternate;
        }

        @keyframes softGlow {
            from { opacity: 0.4; }
            to { opacity: 0.8; }
        }

        .quote-text {
            font-size: 1.5rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            position: relative;
            animation: fadeInScale 0.6s ease-out;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .quote-text::before,
        .quote-text::after {
            content: '"';
            font-size: 2rem;
            color: var(--accent);
            opacity: 0.5;
            font-weight: 300;
            position: absolute;
        }

        .quote-text::before {
            top: -0.4rem;
            left: -1rem;
        }

        .quote-text::after {
            bottom: -0.4rem;
            right: -1rem;
        }

        .quote-author {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 500;
            animation: fadeIn 0.8s ease-out 0.2s both;
            letter-spacing: 0.05em;
        }

        .quote-category {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(79, 70, 229, 0.2);
            color: var(--accent);
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2.5rem;
            animation: fadeIn 0.6s ease-out 0.4s both;
            flex-wrap: wrap;
        }

        .btn {
            background: var(--accent);
            border: none;
            border-radius: 12px;
            padding: 1rem 2.5rem;
            font-size: 0.95rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.25);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            touch-action: manipulation;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #059669;
        }

        .loading {
            display: none;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(79, 70, 229, 0.3);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .notification.show {
            transform: translateX(0);
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(79, 70, 229, 0.2);
            z-index: 1001;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            width: 0%;
            transition: width 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeInScale {
            from { transform: scale(0.98); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeOutScale {
            from { transform: scale(1); opacity: 1; }
            to { transform: scale(0.98); opacity: 0; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes slideInFromRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .install-prompt {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            background: var(--accent);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            cursor: pointer;
            display: none;
            z-index: 1000;
            animation: slideInFromRight 0.5s ease-out;
            font-size: 0.9rem;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .quote-card {
                padding: 2rem;
                margin: 0.5rem;
                border-radius: 16px;
                min-height: 180px;
            }

            .quote-text {
                font-size: 1.3rem;
                line-height: 1.5;
            }

            .logo {
                font-size: 2rem;
            }

            .btn {
                padding: 0.8rem 2rem;
                font-size: 0.9rem;
            }

            .quote-stats {
                gap: 1rem;
                flex-wrap: wrap;
            }

            .stat {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }

            .controls {
                gap: 0.8rem;
            }

            .notification {
                top: 1rem;
                right: 1rem;
                padding: 0.8rem 1.2rem;
            }

            .install-prompt {
                bottom: 1rem;
                right: 1rem;
                padding: 0.8rem 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    
    <canvas id="particles"></canvas>
    
    <div class="container">
        <header class="header">
            <h1 class="logo">Millennium's Wisdom</h1>
            <p class="subtitle georgian">პრაქტიკა არის გამოცდილება, რომელსაც მივყავართ სრულყოფილებამდე</p>
        </header>

        <div class="quote-stats">
            <div class="stat">
                <span>📚</span>
                <span>Quote <span id="currentIndex">1</span>/<span id="totalQuotes">15</span></span>
            </div>
        </div>

        <div class="quote-card" data-tilt data-tilt-max="3" data-tilt-speed="400" data-tilt-perspective="1000">
            <div class="quote-category" id="quoteCategory">Wisdom</div>
            <div class="loading" id="loading"></div>
            <div class="quote-content" id="quoteContent">
                <p class="quote-text georgian" id="quoteText" lang="ka"></p>
                <p class="quote-author" id="quoteAuthor"></p>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="newQuoteBtn">
                <span>✨</span>
                <span>New Quote</span>
            </button>
            <button class="btn btn-success" id="shareBtn">
                <span>🔗</span>
                <span>Share</span>
            </button>
        </div>
    </div>

    <div class="notification" id="notification">
        <span id="notificationIcon">✅</span>
        <span id="notificationText">Quote copied to clipboard!</span>
    </div>

    <div class="install-prompt" id="installPrompt">
        <div>📱 Install Millennium's Wisdom</div>
    </div>

    <script>
        class QuoteApp {
            constructor() {
                this.allQuotes = [
                    { text: "არასოდეს მიიღო ღალატი ვინმესგან, აპატიე, მაგრამ არასოდეს დაივიწყო", author: "Millennium" },
                    { text: "დააწესე საზღვრები სხვებთან, თორემ შენი სიკეთის გამო გაწყენინებენ.", author: "Millennium" },
                    { text: "არასოდეს აიძულო ვინმე, რომ შენ აგირჩიოს, სანაცვლოდ, მიეცი ადამიანებს თავისუფლება, გააკეთონ ის, რაც სურთ.", author: "Millennium" },
                    { text: "განივითარე უნარი, თქვა უარი იმაზე, რაც შენთვის სარგებელს არ მოაქვს.", author: "Millennium" },
                    { text: "ნაკლები ილაპარაკე და შეინარჩუნე შენი ცხოვრება საიდუმლოდ", author: "Millennium" },
                    { text: "არაფერი მიიღო ახლოს გულთან, ეცადე იყო ნაკლებად ემოციური და უფრო მშვიდი", author: "Millennium" },
                    { text: "ზოგჯერ რთული გამოცდილება გჭირდება, რათა აღმოაჩინო შენი ნამდვილი არსი", author: "Millennium" },
                    { text: "სიმდიდრე არ არის მატერიალური ფასეულობების დაგროვება, ეს არის უნარი, დახარჯო ნაკლები, ვიდრე გამოიმუშავებ, გადადო და ინვესტირება გააკეთო. თქვენ ვერ გამდიდრდებით, სანამ ამას არ აითვისებთ.", author: "Millennium" },
                    { text: "თუ ფიქრობ, რომ პრობლემა ჩემშია, მოგიწევს მე შეცვალო. თუ გააცნობიერებ, რომ პრობლემა შენშია, შეძლებ თვითონ შეიცვალო, რაღაც ისწავლო და გახდე უფრო ბრძენი. ადამიანების უმეტესობა კი ელოდება, რომ სამყაროში ყველა სხვა შეიცვლება, გარდა თავად მათი.", author: "Millennium" },
                    { text: "დადგება დრო და მიხვდები, რომ ადამიანს გამარჯვებები არ ასწავლიან. ხშირად, მარცხი ხდება ბრძნული აზრების წყარო. მათ შორისაა ისიც, რომ გამარჯვება ბევრად უფრო სასიამოვნოა. ცხოვრება ისეთია, რომ მარცხი გარდაუვალია, მაგრამ უნდა ისწრაფო, რომ ის არ გახდეს წესი.", author: "Millennium" },
                    { text: "ვყიდულობ, როცა ყველას ეშინია, ვყიდი, როცა მოთხოვნა იზრდება", author: "Millennium" },
                    { text: "თუ შენი ცხოვრება ცუდია, არ დაგავიწყდეს, რომ ეს ცხოვრება ვიღაცის ოცნებაა", author: "Millennium" },
                    { text: "იმუშავე იმაზე, რასაც ვერავინ წაგართმევს.", author: "Millennium" },
                    { text: "ნაკლები ილაპარაკე, მეტი დააკვირდი, ყველაფერს არ სჭირდება რეაქცია", author: "Millennium" },
                    { text: "გქონდეს ძლიერი გონება, არაფერი მიიღო ახლოს გულთან და არ ეძებო სხვებისგან დასტური", author: "Millennium" },
                    { text: "რაც უფრო პატარა ადამიანი ხარ მით უფრო იხილავ გლობალურ საკითხებს", author: "Millennium" },
                    { text: "იყავი შეშინებული, როცა სხვები თავდაჯერებულნი არიან, და თავდაჯერებული, როცა სხვები შეშინებულნი არიან", author: "Warren Buffett" },
                    { text: "There's a time to go long, a time to go short and a time to go fishing", author: "Jesse Livermore" },
                    { text: "პესიმისტები ჭკვიანები ჩანან. მაგრამ საბოლოოდ ოპტიმისტები მდიდრდებიან.", author: "##" },
                    { text: "ნუ იყიდი იმიტომ, რომ იაფია, იყიდე, რადგან ღირებულია.", author: "კარლ აიკანი" }
                ];
                
                this.currentQuoteIndex = 0;
                this.lastQuoteIndex = -1;
                this.usedQuotes = new Set();
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadRandomQuoteOnStart();
                this.setupPWA();
                this.initParticles();
                this.updateStats();
            }

            bindEvents() {
                document.getElementById('newQuoteBtn').addEventListener('click', () => this.loadRandomQuote());
                document.getElementById('shareBtn').addEventListener('click', () => this.shareQuote());
                
                document.addEventListener('keydown', (e) => {
                    if (e.code === 'Space' && !e.target.matches('button')) {
                        e.preventDefault();
                        this.loadRandomQuote();
                    }
                });

                // Prevent double-tap zoom on mobile
                document.addEventListener('touchend', (e) => {
                    if (e.target.closest('.quote-card') && !e.target.closest('button')) {
                        this.loadRandomQuote();
                    }
                });
            }

            getNextQuoteIndex() {
                // Reset used quotes if all have been shown
                if (this.usedQuotes.size >= this.allQuotes.length) {
                    this.usedQuotes.clear();
                }

                let availableIndices = [];
                for (let i = 0; i < this.allQuotes.length; i++) {
                    if (!this.usedQuotes.has(i) && i !== this.lastQuoteIndex) {
                        availableIndices.push(i);
                    }
                }

                // If no available indices, use any except last
                if (availableIndices.length === 0) {
                    availableIndices = this.allQuotes.map((_, i) => i).filter(i => i !== this.lastQuoteIndex);
                }

                const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)];
                this.usedQuotes.add(randomIndex);
                return randomIndex;
            }

            loadRandomQuoteOnStart() {
                const randomIndex = Math.floor(Math.random() * this.allQuotes.length);
                this.currentQuoteIndex = randomIndex;
                this.lastQuoteIndex = randomIndex;
                this.usedQuotes.add(randomIndex);
                this.displayQuoteInstantly(this.allQuotes[randomIndex]);
                this.updateStats();
            }

            loadRandomQuote() {
                const newQuoteBtn = document.getElementById('newQuoteBtn');
                newQuoteBtn.disabled = true;
                
                this.showLoading();
                this.updateProgress(0);
                
                // Simulate loading with progress
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += Math.random() * 30;
                    if (progress > 90) progress = 90;
                    this.updateProgress(progress);
                }, 50);
                
                setTimeout(() => {
                    clearInterval(progressInterval);
                    this.updateProgress(100);
                    
                    const newIndex = this.getNextQuoteIndex();
                    this.lastQuoteIndex = this.currentQuoteIndex;
                    this.currentQuoteIndex = newIndex;
                    
                    this.displayQuote(this.allQuotes[newIndex]);
                    this.updateStats();
                    this.hideLoading();
                    
                    newQuoteBtn.disabled = false;
                    
                    setTimeout(() => this.updateProgress(0), 500);
                }, 800);
            }

            displayQuoteInstantly(quote) {
                const quoteText = document.getElementById('quoteText');
                const quoteAuthor = document.getElementById('quoteAuthor');
                const quoteCategory = document.getElementById('quoteCategory');
                
                quoteText.textContent = quote.text;
                quoteAuthor.textContent = `— ${quote.author}`;
                quoteCategory.textContent = quote.category;
            }

            displayQuote(quote) {
                const quoteText = document.getElementById('quoteText');
                const quoteAuthor = document.getElementById('quoteAuthor');
                const quoteCategory = document.getElementById('quoteCategory');
                
                quoteText.style.animation = 'fadeOutScale 0.3s ease-out forwards';
                quoteAuthor.style.animation = 'fadeOut 0.3s ease-out forwards';
                quoteCategory.style.animation = 'fadeOut 0.3s ease-out forwards';
                
                setTimeout(() => {
                    quoteText.textContent = quote.text;
                    quoteAuthor.textContent = `— ${quote.author}`;
                    quoteCategory.textContent = quote.category;
                    
                    quoteText.style.animation = 'fadeInScale 0.6s ease-out forwards';
                    quoteAuthor.style.animation = 'fadeIn 0.6s ease-out 0.2s forwards';
                    quoteCategory.style.animation = 'fadeIn 0.6s ease-out 0.1s forwards';
                }, 300);
            }

            shareQuote() {
                const currentQuote = this.allQuotes[this.currentQuoteIndex];
                const quoteText = `"${currentQuote.text}" — ${currentQuote.author}`;
                const shareData = {
                    title: "Millennium's Wisdom",
                    text: quoteText,
                    url: window.location.href
                };

                if (navigator.share && navigator.canShare(shareData)) {
                    navigator.share(shareData)
                        .then(() => {
                            this.showNotification('🔗', 'Quote shared successfully!');
                        })
                        .catch(error => {
                            console.error('Share error:', error);
                            this.copyToClipboard(quoteText);
                        });
                } else {
                    this.copyToClipboard(quoteText);
                }
            }

            copyToClipboard(text) {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text)
                        .then(() => {
                            this.showNotification('📋', 'Quote copied to clipboard!');
                        })
                        .catch(error => {
                            console.error('Clipboard error:', error);
                            this.fallbackCopyTextToClipboard(text);
                        });
                } else {
                    this.fallbackCopyTextToClipboard(text);
                }
            }

            fallbackCopyTextToClipboard(text) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-999999px";
                textArea.style.top = "-999999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                    document.execCommand('copy');
                    this.showNotification('📋', 'Quote copied to clipboard!');
                } catch (err) {
                    console.error('Fallback copy failed:', err);
                    this.showNotification('❌', 'Failed to copy quote');
                }
                
                document.body.removeChild(textArea);
            }

            showNotification(icon, message) {
                const notification = document.getElementById('notification');
                const notificationIcon = document.getElementById('notificationIcon');
                const notificationText = document.getElementById('notificationText');
                
                notificationIcon.textContent = icon;
                notificationText.textContent = message;
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            updateStats() {
                document.getElementById('currentIndex').textContent = this.usedQuotes.size;
                document.getElementById('totalQuotes').textContent = this.allQuotes.length;
            }

            updateProgress(percentage) {
                const progressFill = document.getElementById('progressFill');
                progressFill.style.width = `${percentage}%`;
            }

            showLoading() {
                document.getElementById('loading').style.display = 'block';
                document.getElementById('quoteContent').style.opacity = '0.6';
            }

            hideLoading() {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('quoteContent').style.opacity = '1';
            }

            setupPWA() {
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('/service-worker.js')
                        .then(registration => {
                            console.log('Service Worker registered with scope:', registration.scope);
                        })
                        .catch(error => {
                            console.error('Service Worker registration failed:', error);
                        });
                }

                let deferredPrompt;
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    document.getElementById('installPrompt').style.display = 'block';
                });

                document.getElementById('installPrompt').addEventListener('click', () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then(() => {
                            deferredPrompt = null;
                            document.getElementById('installPrompt').style.display = 'none';
                        });
                    }
                });
            }

            initParticles() {
                const canvas = document.getElementById('particles');
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                const particleArray = [];
                const numberOfParticles = 50;

                class Particle {
                    constructor() {
                        this.x = Math.random() * canvas.width;
                        this.y = Math.random() * canvas.height;
                        this.size = Math.random() * 3 + 1;
                        this.opacity = Math.random() * 0.3 + 0.1;
                        this.speedX = Math.random() * 0.5 - 0.25;
                        this.speedY = Math.random() * 0.5 - 0.25;
                        this.fadeSpeed = Math.random() * 0.02 + 0.005;
                        this.color = this.getRandomColor();
                    }

                    getRandomColor() {
                        const colors = [
                            'rgba(79, 70, 229, ',
                            'rgba(124, 58, 237, ',
                            'rgba(16, 185, 129, ',
                            'rgba(245, 158, 11, '
                        ];
                        return colors[Math.floor(Math.random() * colors.length)];
                    }

                    update() {
                        this.x += this.speedX;
                        this.y += this.speedY;
                        this.opacity -= this.fadeSpeed;

                        if (this.opacity <= 0) {
                            this.x = Math.random() * canvas.width;
                            this.y = Math.random() * canvas.height;
                            this.opacity = Math.random() * 0.3 + 0.1;
                            this.size = Math.random() * 3 + 1;
                            this.color = this.getRandomColor();
                        }

                        if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                        if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
                    }

                    draw() {
                        ctx.fillStyle = this.color + this.opacity + ')';
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                        
                        // Add glow effect
                        ctx.shadowColor = this.color + this.opacity + ')';
                        ctx.shadowBlur = this.size * 2;
                        ctx.fill();
                        ctx.shadowBlur = 0;
                    }
                }

                function initParticles() {
                    for (let i = 0; i < numberOfParticles; i++) {
                        particleArray.push(new Particle());
                    }
                }

                function animateParticles() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let i = 0; i < particleArray.length; i++) {
                        particleArray[i].update();
                        particleArray[i].draw();
                    }
                    requestAnimationFrame(animateParticles);
                }

                initParticles();
                animateParticles();

                window.addEventListener('resize', () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new QuoteApp();
        });
    </script>
</body>
</html>
